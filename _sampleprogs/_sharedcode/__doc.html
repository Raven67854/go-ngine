<html>
	<head>
		<title>Package github.com/go3d/go-ngine/_sampleprogs/_sharedcode</title>
		<meta charset="UTF-8" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<link type="text/css" rel="stylesheet" href="http://golang.org/doc/style.css" />
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script type="text/javascript" src="http://golang.org/doc/godocs.js"></script>
	</head>
	<body>
		<div id="page" class="wide">
		<div class="container">
		<h1>Package github.com/go3d/go-ngine/_sampleprogs/_sharedcode</h1>
		<div id="nav"></div>
		2013/02/05 16:25:17 newDirectory(/target): not a package directory
<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/go3d/go-ngine/_sampleprogs/_sharedcode"</code></dd>
			</dl>
			<dl>
			<dd><a href="#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="#pkg-index">Index</a></dd>
			
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				<p>
Some common base functionality shared by all the go:ngine example apps in _sampleprogs.
</p>

			</div>
		</div>
		
	
		<h2 id="pkg-index">Index</h2>
		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
		<div id="manual-nav">
			<dl>
			
			
				<dd><a href="#pkg-variables">Variables</a></dd>
			
			
				
				<dd><a href="#AddColorMaterials">func AddColorMaterials(idsColors map[string][]float64)</a></dd>
			
				
				<dd><a href="#AddKeyHint">func AddKeyHint(key, hint string)</a></dd>
			
				
				<dd><a href="#AddScene">func AddScene(id string, mainCamScene bool) (me *ng.Scene)</a></dd>
			
				
				<dd><a href="#AddTextureMaterials">func AddTextureMaterials(idsUrls map[string]string)</a></dd>
			
				
				<dd><a href="#AssetRootDirPath">func AssetRootDirPath() string</a></dd>
			
				
				<dd><a href="#CheckAndHandleToggleKeys">func CheckAndHandleToggleKeys()</a></dd>
			
				
				<dd><a href="#CheckCamCtlKeys">func CheckCamCtlKeys()</a></dd>
			
				
				<dd><a href="#HandleCamCtlKeys">func HandleCamCtlKeys()</a></dd>
			
				
				<dd><a href="#OnSec">func OnSec()</a></dd>
			
				
				<dd><a href="#PauseResume">func PauseResume()</a></dd>
			
				
				<dd><a href="#PrintPostLoopSummary">func PrintPostLoopSummary()</a></dd>
			
				
				<dd><a href="#SamplesMainFunc">func SamplesMainFunc(assetLoader, onAppThread, onWinThread func())</a></dd>
			
				
				<dd><a href="#ToggleRetro">func ToggleRetro()</a></dd>
			
				
				<dd><a href="#WindowTitle">func WindowTitle() string</a></dd>
			
			
				
				<dd><a href="#Gui2D">type Gui2D</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="#Gui2D.Setup">func (me *Gui2D) Setup() (err error)</a></dd>
				
			
				
				<dd><a href="#RearMirror">type RearMirror</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="#RearMirror.OnApp">func (me *RearMirror) OnApp()</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#RearMirror.OnWin">func (me *RearMirror) OnWin()</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#RearMirror.Setup">func (me *RearMirror) Setup()</a></dd>
				
			
			
		</dl>

		

		
			<h4>Package files</h4>
			<p>
			<span style="font-size:90%">
			
				<a href="/target/doc.go">doc.go</a>
			
				<a href="/target/gui2d.go">gui2d.go</a>
			
				<a href="/target/rear-mirror.go">rear-mirror.go</a>
			
				<a href="/target/samplescenes.go">samplescenes.go</a>
			
				<a href="/target/user-input.go">user-input.go</a>
			
			</span>
			</p>
		
	
		
		
			<h2 id="pkg-variables">Variables</h2>
			
				<pre>var (
    <span class="comment">//	The primary camera</span>
    Cam *ng.Camera

    <span class="comment">//	Controller for the primary camera</span>
    CamCtl *ng.Controller

    <span class="comment">//	Do not set this field directly, only use PauseResume() to toggle it and effect the associated render-state changes.</span>
    Paused bool
)</pre>
				
			
				<pre>var (
    <span class="comment">//	The maximum index for KeyHints when cycling through it in OnSec()</span>
    MaxKeyHint = len(KeyHints) - 1

    <span class="comment">//	OnSec() changes the window title every second to display FPS etc.</span>
    <span class="comment">//	Also every 4 seconds shows the next one in a number of &#34;key hints&#34; defined here:</span>
    KeyHints = []string{
        &#34;[F2]  --  Toggle Backface Culling&#34;,
        &#34;[F3]  --  Pause/Resume&#34;,
        &#34;[F4]  --  Retro Mode&#34;,
        &#34;[W][S]  --  Camera rise / sink&#34;,
        &#34;[A][D]  --  Camera strafe left / right&#34;,
        &#34;[&lt;][&gt;]  --  Camera turn left / right&#34;,
        &#34;[^][v]  --  Camera move forward / backward&#34;,
        &#34;[PgUp][PgDn]  --  Camera turn up / down&#34;,
        &#34;[Alt][LShift][RShift]  --  Camera move-speed x 0.1 / 10 / 100&#34;,
    }

    <span class="comment">//	Because checking for key-presses happens in onWinThread() but handling such key presses</span>
    <span class="comment">//	(typically resulting in matrix remultiplications and other CPU work) happens in onAppThread,</span>
    <span class="comment">//	this struct helps keep track of both which keys to check in the first place, and their</span>
    <span class="comment">//	latest press-state.</span>
    Keys struct {
        <span class="comment">//	Updated by CheckCamCtlKeys(), contains the latest press-states of the keys in CheckForPressed.</span>
        Pressed map[int]bool

        <span class="comment">//	Contains the keys that CheckCamCtlKeys() will poll and update in Pressed.</span>
        CheckForPressed []int
        <span class="comment">// contains filtered or unexported fields</span>
    }
)</pre>
				
			
		
		
			
			
			<h2 id="AddColorMaterials">func <a href="/target/samplescenes.go?s=1114:1168#L32">AddColorMaterials</a></h2>
			<pre>func AddColorMaterials(idsColors map[string][]float64)</pre>
			<p>
Sets up plain-color effects/materials with the specified IDs.
For each ID (such as &#34;foo&#34; and &#34;bar&#34;):
-	creates an ng.FxEffect with ID &#34;fx_{ID}&#34; (ie. &#34;fx_foo&#34; and &#34;fx_bar&#34;) and adds it
to ng.Core.Libs.Effects; its Diffuse field pointing to the color
-	creates an ng.FxMaterial with ID &#34;mat_{ID}&#34; (ie. &#34;mat_foo&#34; and &#34;mat_bar&#34;) and
adds it to ng.Core.Libs.Materials; its DefaultEffectID pointing to the ng.FxEffect.
</p>

			
		
			
			
			<h2 id="AddKeyHint">func <a href="/target/user-input.go?s=1740:1773#L42">AddKeyHint</a></h2>
			<pre>func AddKeyHint(key, hint string)</pre>
			<p>
Key hints are shown in the window title bar, a new one every few seconds.
This function adds a new hint to be included in that rotation.
</p>

			
		
			
			
			<h2 id="AddScene">func <a href="/target/samplescenes.go?s=520:578#L18">AddScene</a></h2>
			<pre>func AddScene(id string, mainCamScene bool) (me *ng.Scene)</pre>
			<p>
Creates a new core.Scene, adds it to the Scenes library under
the specified ID, and returns it.
</p>

			
		
			
			
			<h2 id="AddTextureMaterials">func <a href="/target/samplescenes.go?s=1944:1995#L47">AddTextureMaterials</a></h2>
			<pre>func AddTextureMaterials(idsUrls map[string]string)</pre>
			<p>
Sets up textures and associated effects/materials with the specified IDs and image URLs.
For each ID (such as &#34;foo&#34; and &#34;bar&#34;):
-	creates an ng.FxImage2D with ID &#34;img_{ID}&#34; (ie. &#34;img_foo&#34; and &#34;img_bar&#34;) and
adds it to ng.Core.Libs.Images.I2D
-	creates an ng.FxEffect with ID &#34;fx_{ID}&#34; (ie. &#34;fx_foo&#34; and &#34;fx_bar&#34;) and adds it
to ng.Core.Libs.Effects; its Diffuse field pointing to the ng.FxImage2D
-	creates an ng.FxMaterial with ID &#34;mat_{ID}&#34; (ie. &#34;mat_foo&#34; and &#34;mat_bar&#34;) and
adds it to ng.Core.Libs.Materials; its DefaultEffectID pointing to the ng.FxEffect.
</p>

			
		
			
			
			<h2 id="AssetRootDirPath">func <a href="/target/samplescenes.go?s=2785:2815#L74">AssetRootDirPath</a></h2>
			<pre>func AssetRootDirPath() string</pre>
			<p>
Returns the &#34;asset root directory&#34; path for go:ngine, in this case: $GOPATH/src/github.com/go3d/go-ngine/_sampleprogs/_sharedassets
</p>

			
		
			
			
			<h2 id="CheckAndHandleToggleKeys">func <a href="/target/user-input.go?s=2380:2411#L59">CheckAndHandleToggleKeys</a></h2>
			<pre>func CheckAndHandleToggleKeys()</pre>
			<p>
To be called every frame (by the parent example app, ONLY in onWinThread()!) to
check AND handle key-toggle states for F2, F3 etc. function keys and Esc.
</p>

			
		
			
			
			<h2 id="CheckCamCtlKeys">func <a href="/target/user-input.go?s=2063:2085#L49">CheckCamCtlKeys</a></h2>
			<pre>func CheckCamCtlKeys()</pre>
			<p>
To be called every frame (by the parent example app, ONLY in onWinThread()!) to collect key-press
states for controlling (in HandleCamCtlKeys() in onAppThread()!) CamCtl to move or rotate Cam.
</p>

			
		
			
			
			<h2 id="HandleCamCtlKeys">func <a href="/target/user-input.go?s=2896:2919#L77">HandleCamCtlKeys</a></h2>
			<pre>func HandleCamCtlKeys()</pre>
			<p>
To be called every frame (by the parent example app, ONLY in onAppThread()!) to process key-press
states (from the previous CheckCamCtlKeys() call) for controlling CamCtl to move or rotate Cam.
</p>

			
		
			
			
			<h2 id="OnSec">func <a href="/target/samplescenes.go?s=3050:3062#L79">OnSec</a></h2>
			<pre>func OnSec()</pre>
			<p>
Called every second by go:ngine&#39;s *core* package. Refreshes the window title and doing so, every 3 seconds shows the next one entry in KeyHints.
</p>

			
		
			
			
			<h2 id="PauseResume">func <a href="/target/samplescenes.go?s=3387:3405#L91">PauseResume</a></h2>
			<pre>func PauseResume()</pre>
			<p>
Pauses rendering or resumes from the current pause.
When paused, the frame last rendered is frozen and rendered in a gray-scale effect.
</p>

			
		
			
			
			<h2 id="PrintPostLoopSummary">func <a href="/target/samplescenes.go?s=3777:3804#L104">PrintPostLoopSummary</a></h2>
			<pre>func PrintPostLoopSummary()</pre>
			<p>
Prints a summary of go:ngine&#39;s *Stats* performance counters when the parent example app exits.
</p>

			
		
			
			
			<h2 id="SamplesMainFunc">func <a href="/target/samplescenes.go?s=4888:4954#L122">SamplesMainFunc</a></h2>
			<pre>func SamplesMainFunc(assetLoader, onAppThread, onWinThread func())</pre>
			<p>
The *func main()* implementation for the parent example app. Initializes go:ngine, sets Cam and CamCtl, calls the specified assetLoader function, then enters The Loop.
</p>

			
		
			
			
			<h2 id="ToggleRetro">func <a href="/target/samplescenes.go?s=6165:6183#L152">ToggleRetro</a></h2>
			<pre>func ToggleRetro()</pre>
			<p>
Toggles &#34;retro mode&#34; for the sample app.
If retro is on, the resolution of the main canvas is 1/4th of the window resolution.
</p>

			
		
			
			
			<h2 id="WindowTitle">func <a href="/target/samplescenes.go?s=6398:6423#L161">WindowTitle</a></h2>
			<pre>func WindowTitle() string</pre>
			<p>
Returns the window title to be set by OnSec().
</p>

			
		
		
			
			
			<h2 id="Gui2D">type <a href="/target/gui2d.go?s=366:406#L1">Gui2D</a></h2>
			<pre>type Gui2D struct {
    Cat, Dog *ng.Node
}</pre>
			<p>
A fake &#34;2D GUI&#34; concoction. There will be much better ngine-provided support for stuff like this.
Has two textured quads, a cat and a dog one, shows them both animated and overlapping
inside a red 64x64 px square in the bottom left canvas corner.
</p>


			

			

			

			

			
				
				<h3 id="Gui2D.Setup">func (*Gui2D) <a href="/target/gui2d.go?s=482:518#L6">Setup</a></h3>
				<pre>func (me *Gui2D) Setup() (err error)</pre>
				<p>
Adds a &#34;2D camera&#34; to the main render canvas, and sets up Cat and Dog.
</p>

				
				
			
		
			
			
			<h2 id="RearMirror">type <a href="/target/rear-mirror.go?s=217:288#L1">RearMirror</a></h2>
			<pre>type RearMirror struct {
    Cam        *ng.Camera
    CamRotAxis unum.Vec3
}</pre>
			<p>
A rather simple &#34;rear-view mirror&#34; camera that can be added to the sample program&#39;s main render canvas.
</p>


			

			

			

			

			
				
				<h3 id="RearMirror.OnApp">func (*RearMirror) <a href="/target/rear-mirror.go?s=412:441#L5">OnApp</a></h3>
				<pre>func (me *RearMirror) OnApp()</pre>
				<p>
Copies the main camera&#39;s current position and direction and reverses its by 180 degrees to achieve a rear-view mirror.
</p>

				
				
			
				
				<h3 id="RearMirror.OnWin">func (*RearMirror) <a href="/target/rear-mirror.go?s=617:646#L13">OnWin</a></h3>
				<pre>func (me *RearMirror) OnWin()</pre>
				<p>
Syncs the rear-view camera&#39;s render states with the main camera&#39;s.
</p>

				
				
			
				
				<h3 id="RearMirror.Setup">func (*RearMirror) <a href="/target/rear-mirror.go?s=836:865#L18">Setup</a></h3>
				<pre>func (me *RearMirror) Setup()</pre>
				<p>
Adds the rear-view mirror&#39;s camera to the main render canvas, at 1/3rd of its width and 1/4th of its height.
</p>

				
				
			
		
		</div>
	

	








		</div></div>
	</body>
</html>